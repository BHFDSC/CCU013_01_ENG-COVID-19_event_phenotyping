Analysis and curation code related to the analysis conducted for this project using the English data in the [NHS Digital Trusted Research Environment](https://digital.nhs.uk/coronavirus/coronavirus-data-services-updates/trusted-research-environment-service-for-england) for England.

## Within [Databricks in the Data Access Environment (DAE)](https://digital.nhs.uk/services/data-access-environment-dae/user-guides/using-databricks-in-the-data-access-environment)  

* `01_phenotype_engineering`  
    * `CCU013_00_helper_functions.py`  
    * `CCU013_01_create_table_aliases.py`  
    * `CCU013_02_master_phenotypes.py`  
    * `CCU013_04_pivot_events.py`  
    * `CCU013_05_demographics.py`
* `02_study_population`  
    * `CCU013_11_paper_cohort_dp_skinny_record_unassembled.py`  
    * `CCU013_12_paper_cohort_dp_skinny_patient_23_01_2020.py`  
    * `CCU013_13_paper_subset_data_to_cohort.py`  
* `03_analysis_databricks`  
    * `Supp_table_2-Codelists_frequencies.py`

## Within [RStudio in the DAE](https://digital.nhs.uk/services/data-access-environment-dae/user-guides/using-rstudio-in-the-data-access-environment)  

* `04_analysis_R`  
    * `CCU013_colorscheme.R`  
    * `Table_1.Rmd`  
    * `Fig_3-sources_venn.R`  
    * `Fig_4-timeline_plots.R`  
    * `Fig_5-trajectory_plots.R`  
    * `Supp_Table_1-Data_source_counts.Rmd`  
    * `Supp_Table_4-death_demographic.R`  
    * `Supp_Table_5 -other_death_diagnoses.R`  
    * `Supp_Fig_2-events_sources_venn.Rmd`  
